<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="style1.css">
	<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
	<script src="js/script.js"></script>
	<script src="js/jquery.min.js"></script>
</head>
<body>
	<div class="col-md-6 sl">
		<div class="slider">
			<div class="img curry"><img src="img/slider-img.png" alt=""></div>
			<div class="img next"><img src="img/slider-img1.jpg" alt=""></div>
			<div class="img pprev"><img src="img/slider-img2.jpg" alt=""></div>
			<div class="img prev"><img src="img/slider-img3.jpg" alt=""></div>
			<div class="img other"><img src="img/slider-img3.jpg" alt=""></div>
			<div class="switch">
				<span class="sw active"></span>
				<span class="sw" ></span>
				<span class="sw" ></span>
				<span class="sw" ></span>
			</div>
		</div>
	</div>
	<script>

	var ci = 0;

	$('.img').click(function() {
		if($(this).attr('class') === $('.img.next').attr('class')) {
			ci = $('.img.curry').index();
			var curry = $('.img.curry');
			var prev = $('.img.prev');
			var pprev = $('.img.pprev');
			var next = $('.img.next');
			var col = $('.img').length;
			var curryIndex = curry.index();
			var curryWasi = curryIndex + 1; var curryWasii = (curryWasi % col)-1; var curryWas = $('.img').eq(curryWasii);
			var prevIndex = prev.index();
			var prevWasi = prevIndex + 1; var prevWasii = (prevWasi % col)-1; var prevWas = $('.img').eq(prevWasii);
			var pprevIndex = pprev.index();
			var pprevWasi = pprevIndex + 1; var pprevWasii = (pprevWasi % col)-1; var pprevWas = $('.img').eq(pprevWasii);
			var nextIndex = next.index();
			var nextWasi = nextIndex -1; var nextWasii = (nextWasi % col)-1; var nextWas = $('.img').eq(nextWasii);

			$('.img').each(function() {
				$(this).removeClass('other');
			})

			$('.img').each(function() {
				if ($(this).index() != curryWasii && $(this).index() != nextWasii && $(this).index() != prevWasii && $(this).index() != pprevWasii) {
					$(this).addClass('other');
				}
			})

			console.log(curryIndex);
			console.log(prevIndex);
			console.log(pprevIndex);
			console.log(nextIndex);

			pprev.css('z-index','1').animate({
				left:'30%',
				top:'8%',
				height:'73%',
				width:'70%'
			}, 800, function() {
				pprev.removeClass('pprev');
				pprevWas.addClass('next');
			})

			curry.css('z-index','2').animate({
				left:'0',
				top:'8%',
				height:'73%',
				width:'70%'
			}, 800, function() {
				curry.removeClass('curry');
				curryWas.addClass('prev');
			})

			prev.css('z-index','0').animate({
				top:'18%',
				left:'12%',
				height:'56%',
				width:'70%'
			}, 800, function() {
				prev.removeClass('prev');
				prevWas.addClass('pprev');
			})

			next.animate({
				left:'11%',
				top:'0',
				height:'88%',
				width:'77%'
			}, 800, function() {
				next.removeClass('next');
				nextWas.addClass('curry');
			}).css('z-index','3')

			switchCheck(ci+=1);
		}

		if($(this).attr('class') === $('.img.prev').attr('class')) {
			ci = $('.img.curry').index();
			var curry = $('.img.curry');
			var prev = $('.img.prev');
			var pprev = $('.img.pprev');
			var next = $('.img.next');

			pprev.css('z-index','1').animate({
				left:'0',
				top:'8%',
				height:'73%',
				width:'70%'
			}, 800, function() {
				pprev.removeClass('pprev');
				pprev.addClass('prev');
			})

			curry.css('z-index','2').animate({
				left:'30%',
				top:'8%',
				height:'73%',
				width:'70%'
			}, 800, function() {
				curry.removeClass('curry');
				curry.addClass('next');
			})

			next.css('z-index','0').animate({
				top:'18%',
				left:'12%',
				height:'56%',
				width:'70%'
			}, 800, function() {
				next.removeClass('next');
				next.addClass('pprev');
			})

			prev.animate({
				left:'11%',
				top:'0',
				height:'88%',
				width:'77%'
			}, 800, function() {
				prev.removeClass('prev');
				prev.addClass('curry');
			}).css('z-index','3')

			switchCheck(ci-=1);
		}
		});

		var switchCheck = function(a) {
		var mis = $('.sw').eq(3);

		$('.sw').each(function() {
			$(this).removeClass('active');
				if($(this).index() == a%4) {
					$(this).addClass('active')
				} 
				if (a == -1) {
					mis.addClass('active')
				}
			})
		}
	</script>
</body>
</html>